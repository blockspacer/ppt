| Offset            | Instr                         | Origin          |
|-------------------+-------------------------------+-----------------|
| 0x080484f0 <+0>   | push   %ebp                   | prologue        |
| 0x080484f1 <+1>   | push   %ebx                   |                 |
| 0x080484f2 <+2>   | push   %edi                   |                 |
| 0x080484f3 <+3>   | push   %esi                   |                 |
|-------------------+-------------------------------+-----------------|
| 0x080484f4 <+4>   | sub    $0x3c,%esp             | head            |
| 0x080484f7 <+7>   | cmpl   $0x2,0x50(%esp)        |                 |
| 0x080484fc <+12>  | jl     0x80486cb <main+475>   |                 |
|-------------------+-------------------------------+-----------------|
| 0x08048502 <+18>  | mov    0x54(%esp),%esi        | load_args       |
| 0x08048506 <+22>  | mov    0x8(%esi),%eax         |                 |
| 0x08048509 <+25>  | mov    0xc(%esi),%edi         |                 |
| 0x0804850c <+28>  | mov    %eax,0x18(%esp)        |                 |
| 0x08048510 <+32>  | mov    %eax,(%esp)            |                 |
| 0x08048513 <+35>  | call   0x8048408 <atoi@plt>   |                 |
| 0x08048518 <+40>  | mov    %eax,%ebx              |                 |
| 0x0804851a <+42>  | mov    %edi,(%esp)            |                 |
| 0x0804851d <+45>  | call   0x8048408 <atoi@plt>   |                 |
| 0x08048522 <+50>  | mov    %eax,0x14(%esp)        |                 |
| 0x08048526 <+54>  | test   %eax,%eax              |                 |
| 0x08048528 <+56>  | jle    0x80486cb <main+475>   |                 |
|-------------------+-------------------------------+-----------------|
| 0x0804852e <+62>  | mov    0x4(%esi),%eax         | try_fopen       |
| 0x08048531 <+65>  | mov    %eax,0x18(%esp)        |                 |
| 0x08048535 <+69>  | mov    %eax,(%esp)            |                 |
| 0x08048538 <+72>  | movl   $0x80487d0,0x4(%esp)   |                 |
| 0x08048540 <+80>  | call   0x80483f8 <fopen@plt>  |                 |
| 0x08048545 <+85>  | mov    %eax,%esi              |                 |
| 0x08048547 <+87>  | test   %esi,%esi              |                 |
| 0x08048549 <+89>  | je     0x80486bf <main+463>   |                 |
|-------------------+-------------------------------+-----------------|
| 0x0804854f <+95>  | mov    %ebx,(%esp)            | try_shmat       |
| 0x08048552 <+98>  | movl   $0x100,0x8(%esp)       |                 |
| 0x0804855a <+106> | movl   $0x0,0x4(%esp)         |                 |
| 0x08048562 <+114> | call   0x80483b8 <shmat@plt>  |                 |
| 0x08048567 <+119> | test   %eax,%eax              |                 |
| 0x08048569 <+121> | je     0x80486bf <main+463>   |                 |
|-------------------+-------------------------------+-----------------|
| 0x0804856f <+127> | mov    %eax,0x20(%esp)        | init_vars       |
| 0x08048573 <+131> | mov    %eax,0x1c(%esp)        |                 |
| 0x08048577 <+135> | mov    0x14(%esp),%ecx        |                 |
| 0x0804857b <+139> | mov    %ecx,%edi              |                 |
| 0x0804857d <+141> | shl    $0x4,%edi              |                 |
| 0x08048580 <+144> | add    %eax,%edi              |                 |
| 0x08048582 <+146> | movl   $0x0,0x30(%esp)        |                 |
| 0x0804858a <+154> | movl   $0x0,0x2c(%esp)        |                 |
| 0x08048592 <+162> | movl   $0x186a0,0x28(%esp)    |                 |
| 0x0804859a <+170> | movl   $0x0,0x38(%esp)        |                 |
| 0x080485a2 <+178> | lea    0x0(,%ecx,4),%ebx      |                 |
| 0x080485a9 <+185> | jmp    0x804865f <main+367>   |                 |
|-------------------+-------------------------------+-----------------|
| 0x080485ae <+190> | xchg   %ax,%ax                | accept_frame    |
| 0x080485b0 <+192> | incl   0x38(%esp)             |                 |
| 0x080485b4 <+196> | incl   0x34(%esp)             |                 |
| 0x080485b8 <+200> | mov    0x20(%esp),%eax        |                 |
| 0x080485bc <+204> | mov    (%eax),%ecx            |                 |
| 0x080485be <+206> | mov    %ecx,0x30(%esp)        |                 |
| 0x080485c2 <+210> | add    $0x10,%eax             |                 |
| 0x080485c5 <+213> | mov    %eax,0x20(%esp)        |                 |
| 0x080485c9 <+217> | cmp    %edi,%eax              |                 |
| 0x080485cb <+219> | jne    0x8048670 <main+384>   |                 |
|-------------------+-------------------------------+-----------------|
| 0x080485d1 <+225> | mov    0x1c(%esp),%eax        | write_buffer    |
| 0x080485d5 <+229> | mov    0x38(%esp),%ecx        |                 |
| 0x080485d9 <+233> | mov    %esi,0xc(%esp)         |                 |
| 0x080485dd <+237> | mov    %ecx,0x4(%esp)         |                 |
| 0x080485e1 <+241> | mov    %eax,(%esp)            |                 |
| 0x080485e4 <+244> | movl   $0x10,0x8(%esp)        |                 |
| 0x080485ec <+252> | call   0x8048418 <fwrite@plt> |                 |
| 0x080485f1 <+257> | mov    0x20(%esp),%eax        |                 |
| 0x080485f5 <+261> | mov    %eax,0x1c(%esp)        |                 |
| 0x080485f9 <+265> | movl   $0x0,0x38(%esp)        |                 |
| 0x08048601 <+273> | cmpl   $0x0,0x24(%esp)        |                 |
| 0x08048606 <+278> | jne    0x8048670 <main+384>   |                 |
|-------------------+-------------------------------+-----------------|
| 0x08048608 <+280> | mov    0x34(%esp),%ecx        | finish_read     |
| 0x0804860c <+284> | mov    %ecx,%eax              |                 |
| 0x0804860e <+286> | mov    0x14(%esp),%edx        |                 |
| 0x08048612 <+290> | sub    %edx,%eax              |                 |
| 0x08048614 <+292> | sar    $0x3,%edx              |                 |
| 0x08048617 <+295> | cmp    %edx,%eax              |                 |
| 0x08048619 <+297> | jle    0x8048622 <main+306>   |                 |
|-------------------+-------------------------------+-----------------|
| 0x0804861b <+299> | imul   $0x7,%edx,%edx         | finish_read2    |
| 0x0804861e <+302> | cmp    %edx,%eax              |                 |
| 0x08048620 <+304> | jl     0x804864f <main+351>   |                 |
|-------------------+-------------------------------+-----------------|
| 0x08048622 <+306> | mov    0x14(%esp),%eax        | recalc          |
| 0x08048626 <+310> | imul   0x28(%esp),%eax        |                 |
| 0x0804862b <+315> | add    %ecx,%ecx              |                 |
| 0x0804862d <+317> | xor    %edx,%edx              |                 |
| 0x0804862f <+319> | div    %ecx                   |                 |
| 0x08048631 <+321> | cmp    $0x1e8481,%eax         |                 |
| 0x08048636 <+326> | mov    $0x1e8480,%ecx         |                 |
| 0x0804863b <+331> | cmovge %ecx,%eax              |                 |
| 0x0804863e <+334> | cmp    $0x1869f,%eax          |                 |
| 0x08048643 <+339> | mov    $0x186a0,%ecx          |                 |
| 0x08048648 <+344> | cmovle %ecx,%eax              |                 |
| 0x0804864b <+347> | mov    %eax,0x28(%esp)        |                 |
|-------------------+-------------------------------+-----------------|
| 0x0804864f <+351> | mov    0x28(%esp),%ebp        | do_sleep        |
| 0x08048653 <+355> | mov    %ebp,(%esp)            |                 |
| 0x08048656 <+358> | call   0x80483e8 <usleep@plt> |                 |
| 0x0804865b <+363> | test   %ebp,%ebp              |                 |
| 0x0804865d <+365> | je     0x80486cb <main+475>   |                 |
|-------------------+-------------------------------+-----------------|
| 0x0804865f <+367> | movl   $0x0,0x34(%esp)        | sleep_loop_head |
| 0x08048667 <+375> | movl   $0x1,0x24(%esp)        |                 |
| 0x0804866f <+383> | nop                           |                 |
|-------------------+-------------------------------+-----------------|
| 0x08048670 <+384> | mov    0x30(%esp),%eax        | read_loop_head  |
| 0x08048674 <+388> | mov    0x20(%esp),%ecx        |                 |
| 0x08048678 <+392> | cmp    %eax,(%ecx)            |                 |
| 0x0804867a <+394> | jae    0x80485b0 <main+192>   |                 |
|-------------------+-------------------------------+-----------------|
| 0x08048680 <+400> | mov    0x30(%esp),%eax        | read_loop_head2 |
| 0x08048684 <+404> | sub    %ebx,%eax              |                 |
| 0x08048686 <+406> | mov    %eax,%ecx              |                 |
| 0x08048688 <+408> | sar    $0x1f,%ecx             |                 |
| 0x0804868b <+411> | and    %eax,%ecx              |                 |
| 0x0804868d <+413> | mov    0x20(%esp),%eax        |                 |
| 0x08048691 <+417> | cmp    %ecx,(%eax)            |                 |
| 0x08048693 <+419> | jbe    0x80485b0 <main+192>   |                 |
|-------------------+-------------------------------+-----------------|
| 0x08048699 <+425> | cmpl   $0x0,0x34(%esp)        | read_loop_head2 |
| 0x0804869e <+430> | jne    0x80486b2 <main+450>   |                 |
| 0x080486a0 <+432> | mov    0x20(%esp),%eax        |                 |
| 0x080486a4 <+436> | mov    (%eax),%eax            |                 |
| 0x080486a6 <+438> | mov    0x30(%esp),%ecx        |                 |
| 0x080486aa <+442> | cmp    %ecx,%eax              |                 |
| 0x080486ac <+444> | jne    0x80485b0 <main+192>   |                 |
|-------------------+-------------------------------+-----------------|
| 0x080486b2 <+450> | movl   $0x0,0x24(%esp)        | failed_read     |
| 0x080486ba <+458> | jmp    0x80485d1 <main+225>   |                 |
|-------------------+-------------------------------+-----------------|
| 0x080486bf <+463> | mov    0x18(%esp),%eax        | p_error         |
| 0x080486c3 <+467> | mov    %eax,(%esp)            |                 |
| 0x080486c6 <+470> | call   0x80483d8 <perror@plt> |                 |
|-------------------+-------------------------------+-----------------|
| 0x080486cb <+475> | mov    $0x1,%eax              | exit            |
| 0x080486d0 <+480> | add    $0x3c,%esp             |                 |
| 0x080486d3 <+483> | pop    %esi                   | epilogue        |
| 0x080486d4 <+484> | pop    %edi                   |                 |
| 0x080486d5 <+485> | pop    %ebx                   |                 |
| 0x080486d6 <+486> | pop    %ebp                   |                 |
| 0x080486d7 <+487> | ret                           |                 |
|                   |                               |                 |

 
Addresses
0x38(esp) v_stride
0x34(esp) v_count
0x30(esp) v_seqno
0x2c(esp) v_last_seqno
0x28(esp) v_delay
0x24(esp) v_cont_read
0x20(esp) v_p_cur
0x1c(esp) v_p_stride
0x18(esp) v_p_error

-- single run notes
shmat's retval (array_start) = b7fde000
$esi gets array_start       at b7fde000
%edi gets array_end,        at b7fde080


-----------------------------------------------------------------------

| Address           | Instruction                   | Block           |
|-------------------+-------------------------------+-----------------|
| 0x080484f0 <+0>   | push   %ebx                   | - Init -        |
| 0x080484f1 <+1>   | push   %edi                   |                 |
| 0x080484f2 <+2>   | push   %esi                   |                 |
| 0x080484f3 <+3>   | sub    $0x40,%esp             |                 |
| 0x080484f6 <+6>   | cmpl   $0x3,0x50(%esp)        |                 |
| 0x080484fb <+11>  | jl     0x80486fd <main+525>   |                 |
|-------------------+-------------------------------+-----------------|
| 0x08048501 <+17>  | mov    0x54(%esp),%esi        | load_args       |
| 0x08048505 <+21>  | mov    0x8(%esi),%eax         |                 |
| 0x08048508 <+24>  | mov    0xc(%esi),%edi         |                 |
| 0x0804850b <+27>  | mov    %eax,0x1c(%esp)        |                 |
| 0x0804850f <+31>  | mov    %eax,(%esp)            |                 |
| 0x08048512 <+34>  | call   0x8048408 <atoi@plt>   |                 |
| 0x08048517 <+39>  | mov    %eax,%ebx              |                 |
| 0x08048519 <+41>  | mov    %edi,(%esp)            |                 |
| 0x0804851c <+44>  | call   0x8048408 <atoi@plt>   |                 |
| 0x08048521 <+49>  | mov    %eax,0x10(%esp)        |                 |
| 0x08048525 <+53>  | test   %eax,%eax              |                 |
| 0x08048527 <+55>  | jle    0x80486fd <main+525>   |                 |
|-------------------+-------------------------------+-----------------|
| 0x0804852d <+61>  | mov    0x4(%esi),%eax         | try_fopen       |
| 0x08048530 <+64>  | mov    %eax,0x1c(%esp)        |                 |
| 0x08048534 <+68>  | mov    %eax,(%esp)            |                 |
| 0x08048537 <+71>  | movl   $0x8048800,0x4(%esp)   |                 |
| 0x0804853f <+79>  | call   0x80483f8 <fopen@plt>  |                 |
| 0x08048544 <+84>  | mov    %eax,0x18(%esp)        |                 |
| 0x08048548 <+88>  | test   %eax,%eax              |                 |
| 0x0804854a <+90>  | je     0x80486f1 <main+513>   |                 |
|-------------------+-------------------------------+-----------------|
| 0x08048550 <+96>  | mov    %ebx,(%esp)            | try_shmat       |
| 0x08048553 <+99>  | movl   $0x100,0x8(%esp)       |                 |
| 0x0804855b <+107> | movl   $0x0,0x4(%esp)         |                 |
| 0x08048563 <+115> | call   0x80483b8 <shmat@plt>  |                 |
| 0x08048568 <+120> | test   %eax,%eax              |                 |
| 0x0804856a <+122> | je     0x80486f1 <main+513>   |                 |
|-------------------+-------------------------------+-----------------|
| 0x08048570 <+128> | mov    %eax,0x14(%esp)        | init_vars       |
| 0x08048574 <+132> | mov    %eax,0x24(%esp)        |                 |
| 0x08048578 <+136> | mov    %eax,0x20(%esp)        |                 |
| 0x0804857c <+140> | mov    0x10(%esp),%ecx        |                 |
| 0x08048580 <+144> | mov    %ecx,%esi              |                 |
| 0x08048582 <+146> | shl    $0x4,%esi              |                 |
| 0x08048585 <+149> | add    %eax,%esi              |                 |
| 0x08048587 <+151> | movl   $0x0,0x34(%esp)        |                 |
| 0x0804858f <+159> | movl   $0x0,0x30(%esp)        |                 |
| 0x08048597 <+167> | movl   $0x186a0,0x2c(%esp)    |                 |
| 0x0804859f <+175> | movl   $0x0,0x3c(%esp)        |                 |
| 0x080485a7 <+183> | lea    0x0(,%ecx,4),%edi      |                 |
| 0x080485ae <+190> | jmp    0x804867f <main+399>   |                 |
|-------------------+-------------------------------+-----------------|
| 0x080485b3 <+195> | lea    0x0(%esi),%esi         | inst. pad?      |
| 0x080485b9 <+201> | lea    0x0(%edi,%eiz,1),%edi  |                 |
|-------------------+-------------------------------+-----------------|
| 0x080485c0 <+208> | incl   0x3c(%esp)             | accept_frame    |
| 0x080485c4 <+212> | incl   0x38(%esp)             |                 |
| 0x080485c8 <+216> | mov    0x24(%esp),%eax        |                 |
| 0x080485cc <+220> | mov    (%eax),%ecx            |                 |
| 0x080485ce <+222> | mov    %ecx,0x34(%esp)        |                 |
| 0x080485d2 <+226> | add    $0x10,%eax             |                 |
| 0x080485d5 <+229> | mov    %eax,0x24(%esp)        |                 |
| 0x080485d9 <+233> | cmp    %esi,%eax              |                 |
| 0x080485db <+235> | jne    0x8048690 <main+416>   |                 |
|-------------------+-------------------------------+-----------------|
| 0x080485e1 <+241> | mov    0x14(%esp),%eax        | back_to_front   |
| 0x080485e5 <+245> | mov    %eax,0x24(%esp)        |                 |
|-------------------+-------------------------------+-----------------|
| 0x080485e9 <+249> | mov    0x20(%esp),%eax        | write_buffer    |
| 0x080485ed <+253> | mov    0x3c(%esp),%ecx        |                 |
| 0x080485f1 <+257> | mov    0x18(%esp),%ebx        |                 |
| 0x080485f5 <+261> | mov    %ebx,0xc(%esp)         |                 |
| 0x080485f9 <+265> | mov    %ecx,0x4(%esp)         |                 |
| 0x080485fd <+269> | mov    %eax,(%esp)            |                 |
| 0x08048600 <+272> | movl   $0x10,0x8(%esp)        |                 |
| 0x08048608 <+280> | call   0x8048418 <fwrite@plt> |                 |
| 0x0804860d <+285> | mov    0x24(%esp),%eax        |                 |
| 0x08048611 <+289> | mov    %eax,0x20(%esp)        |                 |
| 0x08048615 <+293> | movl   $0x0,0x3c(%esp)        |                 |
| 0x0804861d <+301> | cmpl   $0x0,0x28(%esp)        |                 |
| 0x08048622 <+306> | jne    0x8048690 <main+416>   |                 |
|-------------------+-------------------------------+-----------------|
| 0x08048624 <+308> | mov    0x38(%esp),%ecx        | finish_read     |
| 0x08048628 <+312> | mov    %ecx,%eax              |                 |
| 0x0804862a <+314> | mov    0x10(%esp),%edx        |                 |
| 0x0804862e <+318> | sub    %edx,%eax              |                 |
| 0x08048630 <+320> | sar    $0x3,%edx              |                 |
| 0x08048633 <+323> | cmp    %edx,%eax              |                 |
| 0x08048635 <+325> | jle    0x804863e <main+334>   |                 |
|-------------------+-------------------------------+-----------------|
| 0x08048637 <+327> | imul   $0x7,%edx,%edx         | finish_read_2   |
| 0x0804863a <+330> | cmp    %edx,%eax              |                 |
| 0x0804863c <+332> | jl     0x804866b <main+379>   |                 |
|-------------------+-------------------------------+-----------------|
| 0x0804863e <+334> | mov    0x10(%esp),%eax        | recalc          |
| 0x08048642 <+338> | imul   0x2c(%esp),%eax        |                 |
| 0x08048647 <+343> | add    %ecx,%ecx              |                 |
| 0x08048649 <+345> | xor    %edx,%edx              |                 |
| 0x0804864b <+347> | div    %ecx                   |                 |
| 0x0804864d <+349> | cmp    $0x1e8481,%eax         |                 |
| 0x08048652 <+354> | mov    $0x1e8480,%ecx         |                 |
| 0x08048657 <+359> | cmovge %ecx,%eax              |                 |
| 0x0804865a <+362> | cmp    $0x1869f,%eax          |                 |
| 0x0804865f <+367> | mov    $0x186a0,%ecx          |                 |
| 0x08048664 <+372> | cmovle %ecx,%eax              |                 |
| 0x08048667 <+375> | mov    %eax,0x2c(%esp)        |                 |
|-------------------+-------------------------------+-----------------|
| 0x0804866b <+379> | mov    0x2c(%esp),%ebx        | do_sleep        |
| 0x0804866f <+383> | mov    %ebx,(%esp)            |                 |
| 0x08048672 <+386> | call   0x80483e8 <usleep@plt> |                 |
| 0x08048677 <+391> | test   %ebx,%ebx              |                 |
| 0x08048679 <+393> | je     0x80486fd <main+525>   |                 |
|-------------------+-------------------------------+-----------------|
| 0x0804867f <+399> | movl   $0x0,0x38(%esp)        | sleep_loop_head |
| 0x08048687 <+407> | movl   $0x1,0x28(%esp)        |                 |
| 0x0804868f <+415> | nop                           |                 |
|-------------------+-------------------------------+-----------------|
| 0x08048690 <+416> | mov    0x34(%esp),%eax        | read_loop_head  |
| 0x08048694 <+420> | mov    0x24(%esp),%ecx        |                 |
| 0x08048698 <+424> | cmp    %eax,(%ecx)            |                 |
| 0x0804869a <+426> | jae    0x80485c0 <main+208>   |                 |
|-------------------+-------------------------------+-----------------|
| 0x080486a0 <+432> | mov    0x24(%esp),%eax        | read_loop_head2 |
| 0x080486a4 <+436> | movd   (%eax),%xmm0           |                 |
| 0x080486a8 <+440> | movsd  0x80487d8,%xmm1        |                 |
| 0x080486b0 <+448> | orps   %xmm1,%xmm0            |                 |
| 0x080486b3 <+451> | subsd  %xmm1,%xmm0            |                 |
| 0x080486b7 <+455> | mov    0x34(%esp),%eax        |                 |
| 0x080486bb <+459> | sub    %edi,%eax              |                 |
| 0x080486bd <+461> | cvtsi2sd %eax,%xmm1           |                 |
| 0x080486c1 <+465> | ucomisd %xmm0,%xmm1           |                 |
| 0x080486c5 <+469> | jae    0x80485c0 <main+208>   |                 |
|-------------------+-------------------------------+-----------------|
| 0x080486cb <+475> | cmpl   $0x0,0x38(%esp)        | read_loop_head3 |
| 0x080486d0 <+480> | jne    0x80486e4 <main+500>   |                 |
| 0x080486d2 <+482> | mov    0x24(%esp),%eax        |                 |
| 0x080486d6 <+486> | mov    (%eax),%eax            |                 |
| 0x080486d8 <+488> | mov    0x34(%esp),%ecx        |                 |
| 0x080486dc <+492> | cmp    %ecx,%eax              |                 |
| 0x080486de <+494> | jne    0x80485c0 <main+208>   |                 |
|-------------------+-------------------------------+-----------------|
| 0x080486e4 <+500> | movl   $0x0,0x28(%esp)        | failed_read     |
| 0x080486ec <+508> | jmp    0x80485e9 <main+249>   |                 |
|-------------------+-------------------------------+-----------------|
| 0x080486f1 <+513> | mov    0x1c(%esp),%eax        | p_exit          |
| 0x080486f5 <+517> | mov    %eax,(%esp)            |                 |
| 0x080486f8 <+520> | call   0x80483d8 <perror@plt> |                 |
|-------------------+-------------------------------+-----------------|
| 0x080486fd <+525> | mov    $0x1,%eax              | exit            |
| 0x08048702 <+530> | add    $0x40,%esp             |                 |
| 0x08048705 <+533> | pop    %esi                   |                 |
| 0x08048706 <+534> | pop    %edi                   |                 |
| 0x08048707 <+535> | pop    %ebx                   |                 |
| 0x08048708 <+536> | ret                           |                 |


LAYOUT
| p_cur        | 0x24(esp) |
| p_stride     | 0x20(esp) |
| array_start  | 0x14(esp) |
| array_end    | $esi      |
| array_length | 0x10(esp) |
| v_count      | 0x38(esp) |
| v_cont_read  | 0x28(esp) |
| v_stride     | 0x3c(esp) |
| v_seqno      | 0x34(esp) |
| v_last_seqno |           |


------------------------------------------------------------
| Offset            | Instruction                   | Block           |
|-------------------+-------------------------------+-----------------|
| 0x08048550 <+0>   | push   %ebx                   | start           |
| 0x08048551 <+1>   | push   %edi                   |                 |
| 0x08048552 <+2>   | push   %esi                   |                 |
| 0x08048553 <+3>   | sub    $0x40,%esp             |                 |
| 0x08048556 <+6>   | cmpl   $0x3,0x50(%esp)        |                 |
| 0x0804855b <+11>  | jl     0x804878e <main+574>   |                 |
|-------------------+-------------------------------+-----------------|
| 0x08048561 <+17>  | mov    0x54(%esp),%esi        | load_args       |
| 0x08048565 <+21>  | mov    0x8(%esi),%eax         |                 |
| 0x08048568 <+24>  | mov    0xc(%esi),%edi         |                 |
| 0x0804856b <+27>  | mov    %eax,0x1c(%esp)        |                 |
| 0x0804856f <+31>  | mov    %eax,(%esp)            |                 |
| 0x08048572 <+34>  | call   0x8048470 <atoi@plt>   |                 |
| 0x08048577 <+39>  | mov    %eax,%ebx              |                 |
| 0x08048579 <+41>  | mov    %edi,(%esp)            |                 |
| 0x0804857c <+44>  | call   0x8048470 <atoi@plt>   |                 |
| 0x08048581 <+49>  | mov    %eax,0x10(%esp)        |                 |
| 0x08048585 <+53>  | test   %eax,%eax              |                 |
| 0x08048587 <+55>  | jle    0x804878e <main+574>   |                 |
|-------------------+-------------------------------+-----------------|
| 0x0804858d <+61>  | mov    0x4(%esi),%eax         | try_fopen       |
| 0x08048590 <+64>  | mov    %eax,0x1c(%esp)        |                 |
| 0x08048594 <+68>  | mov    %eax,(%esp)            |                 |
| 0x08048597 <+71>  | movl   $0x8048890,0x4(%esp)   |                 |
| 0x0804859f <+79>  | call   0x8048450 <fopen@plt>  |                 |
| 0x080485a4 <+84>  | test   %eax,%eax              |                 |
| 0x080485a6 <+86>  | je     0x8048782 <main+562>   |                 |
|-------------------+-------------------------------+-----------------|
| 0x080485ac <+92>  | mov    %eax,0x18(%esp)        | try_shmat       |
| 0x080485b0 <+96>  | mov    %eax,(%esp)            |                 |
| 0x080485b3 <+99>  | movl   $0x0,0x4(%esp)         |                 |
| 0x080485bb <+107> | call   0x80483f0 <setbuf@plt> |                 |
| 0x080485c0 <+112> | mov    %ebx,(%esp)            |                 |
| 0x080485c3 <+115> | movl   $0x100,0x8(%esp)       |                 |
| 0x080485cb <+123> | movl   $0x0,0x4(%esp)         |                 |
| 0x080485d3 <+131> | call   0x8048410 <shmat@plt>  |                 |
| 0x080485d8 <+136> | test   %eax,%eax              |                 |
| 0x080485da <+138> | je     0x8048782 <main+562>   |                 |
|-------------------+-------------------------------+-----------------|
| 0x080485e0 <+144> | mov    %eax,0x14(%esp)        | init_vars       |
| 0x080485e4 <+148> | mov    %eax,0x24(%esp)        |                 |
| 0x080485e8 <+152> | mov    %eax,0x20(%esp)        |                 |
| 0x080485ec <+156> | mov    0x10(%esp),%ecx        |                 |
| 0x080485f0 <+160> | mov    %ecx,%esi              |                 |
| 0x080485f2 <+162> | shl    $0x4,%esi              |                 |
| 0x080485f5 <+165> | add    %eax,%esi              |                 |
| 0x080485f7 <+167> | movl   $0x0,0x34(%esp)        |                 |
| 0x080485ff <+175> | movl   $0x0,0x30(%esp)        |                 |
| 0x08048607 <+183> | movl   $0x186a0,0x2c(%esp)    |                 |
| 0x0804860f <+191> | movl   $0x0,0x3c(%esp)        |                 |
| 0x08048617 <+199> | lea    0x0(,%ecx,4),%edi      |                 |
| 0x0804861e <+206> | jmp    0x8048665 <main+277>   |                 |
|-------------------+-------------------------------+-----------------|
| 0x08048620 <+208> | mov    0x10(%esp),%eax        | recalc3         |
| 0x08048624 <+212> | imul   0x2c(%esp),%eax        |                 |
| 0x08048629 <+217> | mov    0x38(%esp),%ecx        |                 |
| 0x0804862d <+221> | add    %ecx,%ecx              |                 |
| 0x0804862f <+223> | xor    %edx,%edx              |                 |
| 0x08048631 <+225> | div    %ecx                   |                 |
| 0x08048633 <+227> | cmp    $0x1e8481,%eax         |                 |
| 0x08048638 <+232> | mov    $0x1e8480,%ecx         |                 |
| 0x0804863d <+237> | cmovge %ecx,%eax              |                 |
| 0x08048640 <+240> | cmp    $0x1869f,%eax          |                 |
| 0x08048645 <+245> | mov    $0x186a0,%ecx          |                 |
| 0x0804864a <+250> | cmovle %ecx,%eax              |                 |
| 0x0804864d <+253> | mov    %eax,0x2c(%esp)        |                 |
|-------------------+-------------------------------+-----------------|
| 0x08048651 <+257> | mov    0x2c(%esp),%ebx        | do_sleep        |
| 0x08048655 <+261> | mov    %ebx,(%esp)            |                 |
| 0x08048658 <+264> | call   0x8048440 <usleep@plt> |                 |
| 0x0804865d <+269> | test   %ebx,%ebx              |                 |
| 0x0804865f <+271> | je     0x804878e <main+574>   |                 |
|-------------------+-------------------------------+-----------------|
| 0x08048665 <+277> | movl   $0x0,0x38(%esp)        | sleep_loop_head |
| 0x0804866d <+285> | movl   $0x1,0x28(%esp)        |                 |
| 0x08048675 <+293> | lea    0x0(%esi,%eiz,1),%esi  |                 |
| 0x08048679 <+297> | lea    0x0(%edi,%eiz,1),%edi  |                 |
|-------------------+-------------------------------+-----------------|
| 0x08048680 <+304> | mov    0x34(%esp),%eax        | read_loop_head  |
| 0x08048684 <+308> | mov    0x24(%esp),%ecx        |                 |
| 0x08048688 <+312> | cmp    %eax,(%ecx)            |                 |
| 0x0804868a <+314> | jae    0x80486d2 <main+386>   |                 |
|-------------------+-------------------------------+-----------------|
| 0x0804868c <+316> | mov    0x24(%esp),%eax        | read_loop_head2 |
| 0x08048690 <+320> | movd   (%eax),%xmm0           |                 |
| 0x08048694 <+324> | movsd  0x8048868,%xmm1        |                 |
| 0x0804869c <+332> | orps   %xmm1,%xmm0            |                 |
| 0x0804869f <+335> | subsd  %xmm1,%xmm0            |                 |
| 0x080486a3 <+339> | mov    0x34(%esp),%eax        |                 |
| 0x080486a7 <+343> | sub    %edi,%eax              |                 |
| 0x080486a9 <+345> | cvtsi2sd %eax,%xmm1           |                 |
| 0x080486ad <+349> | ucomisd %xmm0,%xmm1           |                 |
| 0x080486b1 <+353> | jae    0x80486d2 <main+386>   |                 |
|-------------------+-------------------------------+-----------------|
| 0x080486b3 <+355> | cmpl   $0x0,0x38(%esp)        | read_loop_head3 |
| 0x080486b8 <+360> | jne    0x80486c8 <main+376>   |                 |
| 0x080486ba <+362> | mov    0x24(%esp),%eax        |                 |
| 0x080486be <+366> | mov    (%eax),%eax            |                 |
| 0x080486c0 <+368> | mov    0x30(%esp),%ecx        |                 |
| 0x080486c4 <+372> | cmp    %ecx,%eax              |                 |
| 0x080486c6 <+374> | jne    0x80486d2 <main+386>   |                 |
|-------------------+-------------------------------+-----------------|
| 0x080486c8 <+376> | movl   $0x0,0x28(%esp)        | failed_read     |
| 0x080486d0 <+384> | jmp    0x80486f7 <main+423>   |                 |
|-------------------+-------------------------------+-----------------|
| 0x080486d2 <+386> | incl   0x3c(%esp)             | accept_frame    |
| 0x080486d6 <+390> | incl   0x38(%esp)             |                 |
| 0x080486da <+394> | mov    0x24(%esp),%eax        |                 |
| 0x080486de <+398> | mov    (%eax),%ecx            |                 |
| 0x080486e0 <+400> | mov    %ecx,0x34(%esp)        |                 |
| 0x080486e4 <+404> | add    $0x10,%eax             |                 |
| 0x080486e7 <+407> | mov    %eax,0x24(%esp)        |                 |
| 0x080486eb <+411> | cmp    %esi,%eax              |                 |
| 0x080486ed <+413> | jne    0x8048680 <main+304>   |                 |
|-------------------+-------------------------------+-----------------|
| 0x080486ef <+415> | mov    0x14(%esp),%eax        | back_to_front   |
| 0x080486f3 <+419> | mov    %eax,0x24(%esp)        |                 |
|-------------------+-------------------------------+-----------------|
| 0x080486f7 <+423> | mov    0x20(%esp),%eax        | write_buffer    |
| 0x080486fb <+427> | mov    0x3c(%esp),%ebx        |                 |
| 0x080486ff <+431> | mov    0x18(%esp),%edx        |                 |
| 0x08048703 <+435> | mov    %edx,0xc(%esp)         |                 |
| 0x08048707 <+439> | mov    %ebx,0x4(%esp)         |                 |
| 0x0804870b <+443> | mov    %eax,(%esp)            |                 |
| 0x0804870e <+446> | movl   $0x10,0x8(%esp)        |                 |
| 0x08048716 <+454> | call   0x8048480 <fwrite@plt> |                 |
| 0x0804871b <+459> | mov    %ebx,0x4(%esp)         |                 |
| 0x0804871f <+463> | movl   $0x8048870,(%esp)      |                 |
| 0x08048726 <+470> | call   0x8048460 <printf@plt> |                 |
| 0x0804872b <+475> | mov    0x24(%esp),%eax        |                 |
| 0x0804872f <+479> | mov    %eax,0x20(%esp)        |                 |
| 0x08048733 <+483> | movl   $0x0,0x3c(%esp)        |                 |
| 0x0804873b <+491> | cmpl   $0x0,0x28(%esp)        |                 |
| 0x08048740 <+496> | jne    0x8048680 <main+304>   |                 |
|-------------------+-------------------------------+-----------------|
| 0x08048746 <+502> | mov    0x34(%esp),%eax        | finish_read     |
| 0x0804874a <+506> | mov    %eax,0x30(%esp)        |                 |
| 0x0804874e <+510> | mov    0x38(%esp),%eax        |                 |
| 0x08048752 <+514> | mov    0x10(%esp),%ecx        |                 |
| 0x08048756 <+518> | sub    %ecx,%eax              |                 |
| 0x08048758 <+520> | sar    $0x3,%ecx              |                 |
| 0x0804875b <+523> | cmp    %ecx,%eax              |                 |
| 0x0804875d <+525> | jle    0x804876a <main+538>   |                 |
|-------------------+-------------------------------+-----------------|
| 0x0804875f <+527> | imul   $0x7,%ecx,%ecx         | finish_read2    |
| 0x08048762 <+530> | cmp    %ecx,%eax              |                 |
| 0x08048764 <+532> | jl     0x8048651 <main+257>   |                 |
|-------------------+-------------------------------+-----------------|
| 0x0804876a <+538> | cmpl   $0x0,0x38(%esp)        | recalc          |
| 0x0804876f <+543> | jne    0x8048620 <main+208>   |                 |
|-------------------+-------------------------------+-----------------|
| 0x08048775 <+549> | movl   $0x1e8480,0x2c(%esp)   | recalc2         |
| 0x0804877d <+557> | jmp    0x8048651 <main+257>   |                 |
|-------------------+-------------------------------+-----------------|
| 0x08048782 <+562> | mov    0x1c(%esp),%eax        | p_error         |
| 0x08048786 <+566> | mov    %eax,(%esp)            |                 |
| 0x08048789 <+569> | call   0x8048430 <perror@plt> |                 |
|-------------------+-------------------------------+-----------------|
| 0x0804878e <+574> | mov    $0x1,%eax              | error           |
| 0x08048793 <+579> | add    $0x40,%esp             |                 |
| 0x08048796 <+582> | pop    %esi                   |                 |
| 0x08048797 <+583> | pop    %edi                   |                 |
| 0x08048798 <+584> | pop    %ebx                   |                 |
| 0x08048799 <+585> | ret                           |                 |
|                   |                               |                 |


| Var          | Offset    |
|--------------+-----------|
| v_delay      | 0x2c(esp) |
| v_stride     | 0x3c(esp) |
| v_count      | 0x38(esp) |
| v_p_cur      | 0x24(esp) |
| v_seqno      | 0x34(esp) |
| array_start  | 0x14(esp) |
| v_p_stride   | 0x20(esp) |
| array_end    | esi       |
| v_last_seqno | 0x30(esp) |
| v_cont_read  | 0x28(esp) |
|              |           |
